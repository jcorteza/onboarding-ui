<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Onboarding Web Page</title>
</head>
<body>
    <h1>Hello World</h1>
    <button id="apiButton" type="button" >Get Twitter Timeline</button>
    <div id="apiDataContainer"></div>

    <script type="application/javascript">
            
        let request = new XMLHttpRequest();
        const btn = document.getElementById("apiButton");
        
        btn.addEventListener("click", (e) => {
            
            const apiDataContainer = document.getElementById("apiDataContainer");

            e.preventDefault();
            request.addEventListener("load", function() {

                const statusArray = JSON.parse(this.response);

                for(i = 0; i < statusArray.length; i++) {

                    let newMessageNode = document.createTextNode(statusArray[i].message);
                    let newDateNode = document.createTextNode(statusArray[i].createdAt.toString());
                    let newImage = document.createElement("img");
                    let newPargraph = document.createElement("p");
                    let newSpan = document.createElement("span");
                    let newDiv = document.createElement("div");
                    let anchor = document.createElement("a");
                    
                    newImage.src = statusArray[i].user.profileImageUrl;
                    newPargraph.appendChild(newMessageNode);
                    newSpan.appendChild(newDateNode)
                    newSpan.style.display = "block";    
                    newDiv.append(newImage, newSpan, newPargraph);
                    anchor.href = "#";
                    anchor.append(newDiv);
                        
                    if(i % 2 == 0) {
                        newDiv.style.backgroundColor = "#F5F5F5";    
                    }
                    apiDataContainer.appendChild(anchor);
                }
            });
            request.open("GET", "http://localhost:8080/api/1.0/twitter/timeline");
            request.send();
            
        });
    </script>
</body>
</html>